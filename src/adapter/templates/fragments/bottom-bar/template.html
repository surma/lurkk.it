<!--
 @license
 Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 This code may only be used under the BSD style license found at
 http://polymer.github.io/LICENSE.txt
 The complete set of authors may be found at
 http://polymer.github.io/AUTHORS.txt
 The complete set of contributors may be found at
 http://polymer.github.io/CONTRIBUTORS.txt
 Code distributed by Google as part of the polymer project is also
 subject to an additional IP rights grant found at
 http://polymer.github.io/PATENTS.txt
-->

<bottom-bar
  id="bottom-bar"
  loading?="${funcs.isLoading(state)}"
  on-dblclick="${funcs.toggleBar}"
>
  <div slot="bar" class="bar">
    <div class="loader"></div>
    <button
      class="button back"
      on-click=${funcs.back}
    >
      ${funcs.icons.backSVG}
    </button>
    <form on-submit="${funcs.open}">
      <input placeholder="/r/..." class="input" value="${funcs.extractSearchBarValue(funcs.topView(state))}"/>
      <input
        type="submit"
        class="button button--primary go"
        value="Go"
      />
    </form>
    <button
      class="button download"
      hidden?=${state.hasDownload}
      on-click=${funcs.download}
    >
      ${funcs.icons.downloadSVG}
    </button>
    <button
      className="${'button favorite' + (funcs.showFavorite(funcs.topView(state)) ? '' : ' invisible ') + (funcs.isFavoriteSubreddit(state) ? ' favorited ' : '')}"
      on-click=${funcs.toggleFavorite}
    >
      ${funcs.isFavoriteSubreddit(state) ? funcs.icons.starOnSVG : funcs.icons.starOffSVG}
    </button>
    <button
      class="button refresh"
      on-click=${funcs.refresh}
    >
      ${funcs.icons.refreshSVG}
    </button>
  </div>
  <div class="main">
    <div class="section--favorites">
      <h1>Favorites</h1>
      <ul class="favorites">
        ${state.value.favorites.sort().map(i => html`<a class="favorite" on-click="${funcs.toggleBar}" href="/r/${i}">/r/${i}</a>`)}
      </ul>
    </div>
  </div>
</bottom-bar>
